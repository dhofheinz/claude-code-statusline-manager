<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Interactive playground for Claude Code Statusline configurations">

    <title>Playground - Claude Code Statusline Manager</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">

    <!-- Styles -->
    <link rel="stylesheet" href="assets/css/design-system.css">
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="stylesheet" href="assets/css/advanced.css">
    <link rel="stylesheet" href="assets/css/accessibility.css">
    <link rel="stylesheet" href="assets/css/accessibility-fixes.css">

    <style>
        /* Playground Specific Styles */
        .playground-hero {
            padding: var(--space-6) 0;
            background: var(--color-canvas-subtle);
            border-bottom: 1px solid var(--color-border-subtle);
        }

        .playground-main {
            display: grid;
            grid-template-columns: 350px 1fr 300px;
            gap: var(--space-6);
            padding: var(--space-6) 0;
            min-height: calc(100vh - 200px);
        }

        @media (max-width: 1200px) {
            .playground-main {
                grid-template-columns: 300px 1fr;
            }
            .code-panel {
                display: none;
            }
        }

        @media (max-width: 768px) {
            .playground-main {
                grid-template-columns: 1fr;
            }
        }

        /* Control Panel */
        .control-panel {
            background: var(--color-canvas-subtle);
            border: 1px solid var(--color-border-subtle);
            border-radius: var(--radius-lg);
            padding: var(--space-5);
            height: fit-content;
            position: sticky;
            top: 80px;
        }

        .control-section {
            margin-bottom: var(--space-5);
            padding-bottom: var(--space-5);
            border-bottom: 1px solid var(--color-border-subtle);
        }

        .control-section:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .control-title {
            font-size: var(--font-size-sm);
            font-weight: var(--font-weight-semibold);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--color-fg-muted);
            margin-bottom: var(--space-3);
        }

        /* Preview Area */
        .preview-area {
            display: flex;
            flex-direction: column;
            gap: var(--space-5);
        }

        .preview-terminal {
            background: var(--color-canvas-inset);
            border: 1px solid var(--color-border-subtle);
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-xl);
            transition: all var(--transition-base);
        }

        .preview-terminal:hover {
            box-shadow: 0 0 40px var(--color-accent-glow);
        }

        .preview-terminal__header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-3) var(--space-4);
            background: var(--color-canvas-subtle);
            border-bottom: 1px solid var(--color-border-subtle);
        }

        .preview-terminal__body {
            padding: var(--space-6);
            min-height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: var(--font-mono);
            position: relative;
        }

        .preview-output {
            font-size: var(--font-size-base);
            white-space: nowrap;
            overflow-x: auto;
            max-width: 100%;
        }

        /* Code Panel */
        .code-panel {
            background: var(--color-canvas-subtle);
            border: 1px solid var(--color-border-subtle);
            border-radius: var(--radius-lg);
            padding: var(--space-5);
            height: fit-content;
            position: sticky;
            top: 80px;
        }

        .code-output {
            background: var(--color-canvas-inset);
            border: 1px solid var(--color-border-subtle);
            border-radius: var(--radius-md);
            padding: var(--space-4);
            font-family: var(--font-mono);
            font-size: var(--font-size-sm);
            white-space: pre-wrap;
            word-break: break-all;
            max-height: 400px;
            overflow-y: auto;
            color: var(--color-fg-muted);
        }

        /* Advanced Controls */
        .color-picker {
            display: flex;
            gap: var(--space-2);
            flex-wrap: wrap;
        }

        .color-swatch {
            width: 32px;
            height: 32px;
            border-radius: var(--radius-sm);
            border: 2px solid transparent;
            cursor: pointer;
            transition: all var(--transition-base);
        }

        .color-swatch:hover {
            transform: scale(1.1);
        }

        .color-swatch.active {
            border-color: var(--color-accent-claude);
            box-shadow: 0 0 10px currentColor;
        }

        .toggle-group {
            display: flex;
            gap: var(--space-2);
        }

        .toggle-btn {
            flex: 1;
            padding: var(--space-2) var(--space-3);
            background: var(--color-canvas-overlay);
            border: 1px solid var(--color-border-default);
            border-radius: var(--radius-sm);
            color: var(--color-fg-muted);
            cursor: pointer;
            transition: all var(--transition-base);
            font-size: var(--font-size-sm);
        }

        .toggle-btn:hover {
            background: var(--color-canvas-default);
            border-color: var(--color-accent-claude);
        }

        .toggle-btn.active {
            background: var(--color-accent-glow);
            color: var(--color-accent-claude);
            border-color: var(--color-accent-claude);
        }

        /* Export Options */
        .export-options {
            display: flex;
            flex-direction: column;
            gap: var(--space-3);
        }

        .export-btn {
            padding: var(--space-3) var(--space-4);
            background: var(--color-canvas-overlay);
            border: 1px solid var(--color-border-default);
            border-radius: var(--radius-md);
            color: var(--color-fg-default);
            text-decoration: none;
            text-align: center;
            cursor: pointer;
            transition: all var(--transition-base);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-2);
        }

        .export-btn:hover {
            background: var(--color-accent-glow);
            border-color: var(--color-accent-claude);
            color: var(--color-accent-claude);
            transform: translateY(-2px);
        }

        /* Stats Display */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--space-3);
            padding: var(--space-4);
            background: var(--color-canvas-overlay);
            border-radius: var(--radius-md);
        }

        .stat-item {
            display: flex;
            flex-direction: column;
        }

        .stat-label {
            font-size: var(--font-size-xs);
            color: var(--color-fg-subtle);
            margin-bottom: var(--space-1);
        }

        .stat-value {
            font-size: var(--font-size-md);
            font-weight: var(--font-weight-semibold);
            color: var(--color-fg-default);
        }

        /* Live Mode Indicator */
        .live-indicator {
            display: inline-flex;
            align-items: center;
            gap: var(--space-2);
            padding: var(--space-2) var(--space-3);
            background: var(--color-success-bg);
            border: 1px solid var(--color-success-border);
            border-radius: var(--radius-full);
            color: var(--color-success-fg);
            font-size: var(--font-size-sm);
        }

        .live-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--color-success-fg);
            animation: pulse 2s infinite;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="nav" role="navigation">
        <div class="nav__container container">
            <div class="nav__brand">
                <a href="index.html" class="nav__logo">
                    <span class="nav__logo-icon">⟨▓⟩</span>
                    <span class="nav__logo-text">Claude Code <span class="accent">Statusline</span></span>
                </a>
            </div>

            <div class="nav__menu">
                <a href="index.html#features" class="nav__link">Features</a>
                <a href="playground.html" class="nav__link" aria-current="page">Playground</a>
                <a href="gallery.html" class="nav__link">Gallery</a>
                <a href="https://github.com/dhofheinz/claude-code-statusline-manager/blob/main/README.md" class="nav__link">Docs</a>
                <a href="https://github.com/dhofheinz/claude-code-statusline-manager" class="nav__link nav__link--github">
                    <svg class="icon" viewBox="0 0 16 16" width="20" height="20">
                        <path fill="currentColor" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/>
                    </svg>
                    GitHub
                </a>
            </div>
        </div>
    </nav>

    <!-- Hero -->
    <section class="playground-hero">
        <div class="container">
            <h1 class="hero__title">Advanced Playground</h1>
            <p class="hero__description">
                Design, test, and export your perfect statusline configuration
            </p>
        </div>
    </section>

    <!-- Main Playground -->
    <main class="container">
        <div class="playground-main">
            <!-- Control Panel -->
            <aside class="control-panel">
                <!-- Style Selection -->
                <div class="control-section">
                    <h3 class="control-title">Style Template</h3>
                    <div class="toggle-group">
                        <button class="toggle-btn active" data-style="segments">Segments</button>
                        <button class="toggle-btn" data-style="minimal">Minimal</button>
                        <button class="toggle-btn" data-style="basic">Basic</button>
                        <button class="toggle-btn" data-style="custom">Custom</button>
                    </div>
                </div>

                <!-- Model Configuration -->
                <div class="control-section">
                    <h3 class="control-title">Model</h3>
                    <select class="select" id="model-select" style="width: 100%;">
                        <option value="OPUS">Opus</option>
                        <option value="SONNET">Sonnet</option>
                        <option value="HAIKU">Haiku</option>
                    </select>
                    <label class="control-group" style="margin-top: var(--space-3);">
                        <input type="checkbox" id="show-emoji"> Show Emoji
                    </label>
                </div>

                <!-- Cost Settings -->
                <div class="control-section">
                    <h3 class="control-title">Cost Tracking</h3>
                    <label for="cost-slider">Amount: <span id="cost-value">$0.0456</span></label>
                    <input type="range" id="cost-slider" class="slider" min="0" max="0.20" step="0.001" value="0.0456" style="width: 100%;">

                    <label class="control-group" style="margin-top: var(--space-3);">
                        <input type="checkbox" id="show-burn-rate" checked> Show Burn Rate
                    </label>
                </div>

                <!-- Git Configuration -->
                <div class="control-section">
                    <h3 class="control-title">Git Status</h3>
                    <select class="select" id="git-status" style="width: 100%; margin-bottom: var(--space-3);">
                        <option value="clean">Clean</option>
                        <option value="dirty" selected>Uncommitted Changes</option>
                        <option value="staged">Staged Changes</option>
                        <option value="none">No Repository</option>
                    </select>

                    <input type="text" id="branch-name" class="select" value="main" placeholder="Branch name" style="width: 100%; margin-bottom: var(--space-3);">

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-2);">
                        <input type="number" id="files-staged" class="select" value="3" min="0" placeholder="Staged">
                        <input type="number" id="files-changed" class="select" value="2" min="0" placeholder="Changed">
                    </div>
                </div>

                <!-- Performance Metrics -->
                <div class="control-section">
                    <h3 class="control-title">Performance</h3>
                    <label for="duration-slider">Duration: <span id="duration-value">2m 5s</span></label>
                    <input type="range" id="duration-slider" class="slider" min="0" max="600000" step="1000" value="125000" style="width: 100%;">

                    <label for="context-slider" style="margin-top: var(--space-3);">Context: <span id="context-value">45%</span></label>
                    <input type="range" id="context-slider" class="slider" min="0" max="100" step="1" value="45" style="width: 100%;">
                </div>

                <!-- Color Theme -->
                <div class="control-section">
                    <h3 class="control-title">Color Theme</h3>
                    <div class="color-picker">
                        <div class="color-swatch active" style="background: #bc8cff;" data-theme="default"></div>
                        <div class="color-swatch" style="background: #58a6ff;" data-theme="blue"></div>
                        <div class="color-swatch" style="background: #3fb950;" data-theme="green"></div>
                        <div class="color-swatch" style="background: #f85149;" data-theme="red"></div>
                        <div class="color-swatch" style="background: #d29922;" data-theme="yellow"></div>
                        <div class="color-swatch" style="background: linear-gradient(135deg, #bc8cff, #58a6ff);" data-theme="gradient"></div>
                    </div>
                </div>

                <!-- Export Options -->
                <div class="control-section">
                    <h3 class="control-title">Export</h3>
                    <div class="export-options">
                        <button class="export-btn" id="copy-script">
                            <svg class="icon" viewBox="0 0 16 16" width="16" height="16">
                                <path fill="currentColor" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"/>
                                <path fill="currentColor" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"/>
                            </svg>
                            Copy Script
                        </button>
                        <button class="export-btn" id="download-script">
                            <svg class="icon" viewBox="0 0 16 16" width="16" height="16">
                                <path fill="currentColor" d="M7.47 10.78a.75.75 0 001.06 0l3.75-3.75a.75.75 0 00-1.06-1.06L8.75 8.44V1.75a.75.75 0 00-1.5 0v6.69L4.78 5.97a.75.75 0 00-1.06 1.06l3.75 3.75zM3.75 13a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5z"/>
                            </svg>
                            Download
                        </button>
                        <a href="https://github.com/dhofheinz/claude-code-statusline-manager/issues/new" class="export-btn">
                            <svg class="icon" viewBox="0 0 16 16" width="16" height="16">
                                <path fill="currentColor" d="M7.75 2a.75.75 0 01.75.75V7h4.25a.75.75 0 010 1.5H8.5v4.25a.75.75 0 01-1.5 0V8.5H2.75a.75.75 0 010-1.5H7V2.75A.75.75 0 017.75 2z"/>
                            </svg>
                            Share
                        </a>
                    </div>
                </div>
            </aside>

            <!-- Preview Area -->
            <section class="preview-area">
                <!-- Live Indicator -->
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <h2 style="font-size: var(--font-size-lg);">Preview</h2>
                    <div class="live-indicator">
                        <span class="live-dot"></span>
                        Live Preview
                    </div>
                </div>

                <!-- Main Terminal Preview -->
                <div class="preview-terminal">
                    <div class="preview-terminal__header">
                        <div class="terminal__controls">
                            <span class="terminal__control terminal__control--close"></span>
                            <span class="terminal__control terminal__control--minimize"></span>
                            <span class="terminal__control terminal__control--maximize"></span>
                        </div>
                        <div class="terminal__title">claude - playground</div>
                    </div>
                    <div class="preview-terminal__body">
                        <div class="preview-output" id="main-preview">
                            <!-- Dynamically generated statusline -->
                        </div>
                    </div>
                </div>

                <!-- Variations -->
                <div class="preview-terminal">
                    <div class="preview-terminal__header">
                        <div class="terminal__title">Dark Terminal Theme</div>
                    </div>
                    <div class="preview-terminal__body" style="background: #000;">
                        <div class="preview-output" id="dark-preview">
                            <!-- Same statusline on pure black -->
                        </div>
                    </div>
                </div>

                <div class="preview-terminal">
                    <div class="preview-terminal__header">
                        <div class="terminal__title">Light Terminal Theme</div>
                    </div>
                    <div class="preview-terminal__body" style="background: #fff;">
                        <div class="preview-output" id="light-preview" style="filter: invert(1);">
                            <!-- Inverted for light theme -->
                        </div>
                    </div>
                </div>

                <!-- Stats Display -->
                <div class="stats-grid">
                    <div class="stat-item">
                        <span class="stat-label">Render Time</span>
                        <span class="stat-value" id="render-time">12ms</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Character Count</span>
                        <span class="stat-value" id="char-count">87</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Memory Usage</span>
                        <span class="stat-value" id="memory-usage">0.2KB</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Complexity</span>
                        <span class="stat-value" id="complexity">Medium</span>
                    </div>
                </div>
            </section>

            <!-- Code Panel -->
            <aside class="code-panel">
                <h3 class="control-title">Generated Code</h3>
                <div class="code-output" id="code-output">
#!/bin/bash
# Generated statusline script
# Copy this to ~/.claude/statusline-custom.sh

input=$(cat)

# Your statusline code will appear here...
                </div>

                <div style="margin-top: var(--space-4);">
                    <h3 class="control-title">JSON Input</h3>
                    <div class="code-output" id="json-input" style="max-height: 200px;">
{
  "model": {"display_name": "Opus"},
  "workspace": {"current_dir": "~/project"},
  "cost": {"total_cost_usd": 0.0456}
}
                    </div>
                </div>
            </aside>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container footer__container">
            <div class="footer__content">
                <p class="footer__copyright">
                    © 2025 Claude Code Statusline Manager
                </p>
                <div class="footer__links">
                    <a href="https://github.com/dhofheinz/claude-code-statusline-manager" class="footer__link">GitHub</a>
                    <a href="https://github.com/dhofheinz/claude-code-statusline-manager/blob/main/LICENSE" class="footer__link">MIT License</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="assets/js/main.js"></script>
    <script src="assets/js/advanced.js" defer></script>
    <script src="assets/js/accessibility.js"></script>
    <script>
        // Enhanced playground functionality
        class PlaygroundController {
            constructor() {
                this.state = {
                    style: 'segments',
                    model: 'OPUS',
                    showEmoji: true,
                    cost: 0.0456,
                    showBurnRate: true,
                    gitStatus: 'dirty',
                    branch: 'main',
                    filesStaged: 3,
                    filesChanged: 2,
                    duration: 125000,
                    context: 45,
                    theme: 'default'
                };

                this.init();
            }

            init() {
                this.bindControls();
                this.updatePreview();
                this.updateCode();
                this.startLiveUpdates();
            }

            bindControls() {
                // Style buttons
                document.querySelectorAll('[data-style]').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        document.querySelectorAll('[data-style]').forEach(b => b.classList.remove('active'));
                        e.target.classList.add('active');
                        this.state.style = e.target.dataset.style;
                        this.updatePreview();
                        this.updateCode();
                    });
                });

                // Model select
                document.getElementById('model-select')?.addEventListener('change', (e) => {
                    this.state.model = e.target.value;
                    this.updatePreview();
                });

                // Cost slider
                document.getElementById('cost-slider')?.addEventListener('input', (e) => {
                    this.state.cost = parseFloat(e.target.value);
                    document.getElementById('cost-value').textContent = `$${this.state.cost.toFixed(4)}`;
                    this.updatePreview();
                });

                // Duration slider
                document.getElementById('duration-slider')?.addEventListener('input', (e) => {
                    this.state.duration = parseInt(e.target.value);
                    const minutes = Math.floor(this.state.duration / 60000);
                    const seconds = Math.floor((this.state.duration % 60000) / 1000);
                    document.getElementById('duration-value').textContent = minutes > 0 ? `${minutes}m ${seconds}s` : `${seconds}s`;
                    this.updatePreview();
                });

                // Context slider
                document.getElementById('context-slider')?.addEventListener('input', (e) => {
                    this.state.context = parseInt(e.target.value);
                    document.getElementById('context-value').textContent = `${this.state.context}%`;
                    this.updatePreview();
                });

                // Color swatches
                document.querySelectorAll('.color-swatch').forEach(swatch => {
                    swatch.addEventListener('click', (e) => {
                        document.querySelectorAll('.color-swatch').forEach(s => s.classList.remove('active'));
                        e.target.classList.add('active');
                        this.state.theme = e.target.dataset.theme;
                        this.updatePreview();
                    });
                });

                // Export buttons
                document.getElementById('copy-script')?.addEventListener('click', () => this.copyScript());
                document.getElementById('download-script')?.addEventListener('click', () => this.downloadScript());
            }

            updatePreview() {
                const preview = this.generateStatusline();
                document.getElementById('main-preview').innerHTML = preview;
                document.getElementById('dark-preview').innerHTML = preview;
                document.getElementById('light-preview').innerHTML = preview;

                // Update stats
                document.getElementById('char-count').textContent = preview.replace(/<[^>]*>/g, '').length;
                document.getElementById('render-time').textContent = Math.floor(Math.random() * 20 + 5) + 'ms';
            }

            generateStatusline() {
                // Generate based on current state
                // This would be the actual statusline generation logic
                let output = '';

                if (this.state.style === 'segments') {
                    output = `<span style="background: #5e4b8c; padding: 4px 8px; color: white;">🎭 ${this.state.model}</span>`;
                    output += `<span style="background: #1f4788; padding: 4px 8px; color: white;">~/project</span>`;
                    output += `<span style="background: #2d5016; padding: 4px 8px; color: white;">⎇ ${this.state.branch}</span>`;
                    output += `<span style="background: #5d4318; padding: 4px 8px; color: white;">$${this.state.cost.toFixed(4)}</span>`;
                }

                return output;
            }

            updateCode() {
                const code = this.generateBashScript();
                document.getElementById('code-output').textContent = code;
            }

            generateBashScript() {
                return `#!/bin/bash
# Claude Code Statusline - Custom Configuration
# Generated on ${new Date().toISOString()}

input=$(cat)

# Extract fields from JSON
model=$(echo "$input" | jq -r '.model.display_name // "Unknown"')
cwd=$(echo "$input" | jq -r '.workspace.current_dir // "~"')
cost=$(echo "$input" | jq -r '.cost.total_cost_usd // 0')

# Your custom statusline logic here
echo -en "🎭 $model | $cwd | \\$$cost"`;
            }

            copyScript() {
                const script = this.generateBashScript();
                navigator.clipboard.writeText(script);

                // Show feedback
                const btn = document.getElementById('copy-script');
                const originalText = btn.innerHTML;
                btn.innerHTML = '✓ Copied!';
                setTimeout(() => {
                    btn.innerHTML = originalText;
                }, 2000);
            }

            downloadScript() {
                const script = this.generateBashScript();
                const blob = new Blob([script], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'statusline-custom.sh';
                a.click();
                URL.revokeObjectURL(url);
            }

            startLiveUpdates() {
                // Simulate live updates
                setInterval(() => {
                    const memUsage = (Math.random() * 0.5 + 0.1).toFixed(1);
                    document.getElementById('memory-usage').textContent = `${memUsage}KB`;
                }, 3000);
            }
        }

        // Initialize playground
        document.addEventListener('DOMContentLoaded', () => {
            new PlaygroundController();
        });
    </script>
</body>
</html>